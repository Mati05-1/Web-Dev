<div class="skills-page-container">
  <div class="container">
    <!-- Header Section -->
    <div class="row justify-content-center mb-5">
      <div class="col-12 col-lg-8 text-center">
        <div class="page-header">
          <h1 class="page-title">
            <i class="bi bi-gear-fill me-3"></i>
            {{ 'Habilidades y Competencias' | uppercase }}
          </h1>
          <p class="page-subtitle">
            Conoce las tecnologÃ­as, lenguajes de programaciÃ³n y habilidades blandas que he desarrollado
          </p>
        </div>
      </div>
    </div>

    <!-- API Status -->
    <div class="row justify-content-center mb-4">
      <div class="col-12 col-lg-8">
        <div class="card my-card api-status-card">
          <div class="card-body text-center">
            <h3 class="card-title">
              <i class="bi bi-cloud-arrow-down me-2"></i>
              Datos desde API REST
            </h3>
            <div *ngIf="loading" class="loading-state">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
              <p class="mt-2">Cargando habilidades desde la API...</p>
            </div>
            <div *ngIf="error" class="error-state">
              <i class="bi bi-exclamation-triangle-fill text-warning me-2"></i>
              {{ error }}
              <button class="btn btn-outline-primary btn-sm ms-2" (click)="refreshData()">
                <i class="bi bi-arrow-clockwise me-1"></i>
                Reintentar
              </button>
            </div>
            <div *ngIf="!loading && !error && apiSkills.length > 0" class="success-state">
              <i class="bi bi-check-circle-fill text-success me-2"></i>
              {{ apiSkills.length }} habilidades cargadas desde la API
              <button class="btn btn-outline-primary btn-sm ms-2" (click)="refreshData()">
                <i class="bi bi-arrow-clockwise me-1"></i>
                Actualizar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- API Skills List -->
    <div class="row justify-content-center mb-4" *ngIf="!loading && !error && apiSkills.length > 0">
      <div class="col-12 col-lg-10">
        <div class="api-skills-wrapper">
          <h3 class="api-skills-title">
            <i class="bi bi-star-fill me-2"></i>
            Habilidades desde API REST
          </h3>
          <div class="api-skills-grid">
            <div *ngFor="let skill of apiSkills; let i = index" 
                 class="api-skill-card"
                 [style.animation-delay]="(i * 0.1) + 's'">
              
              <div class="skill-header">
                <h4 class="skill-name">{{ skill.name }}</h4>
                <div class="skill-category-badge">{{ skill.category }}</div>
              </div>
              
              <div class="skill-level">
                <div class="level-label">{{ skill.level }}</div>
                <div class="progress-bar">
                  <div class="progress-fill" [style.width.%]="skill.percentage"></div>
                </div>
                <div class="percentage">{{ skill.percentage }}%</div>
              </div>
              
              <div class="skill-description">
                <p>{{ skill.description }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Skills Component (Static Fallback) -->
    <div class="row justify-content-center" *ngIf="loading || error">
      <div class="col-12 col-lg-10">
        <div class="skills-wrapper">
          <app-skills 
            [technologies]="technologies"
            [languages]="languages"
            [softSkills]="softSkills">
          </app-skills>
        </div>
      </div>
    </div>

    <!-- Basic Skills from Service -->
    <div class="row justify-content-center mt-4">
      <div class="col-12 col-lg-8">
        <div class="card my-card basic-skills-card">
          <div class="card-body text-center">
            <h3 class="card-title">
              <i class="bi bi-code-slash me-2"></i>
              Habilidades Principales
            </h3>
            <div class="basic-skills-list">
              <div class="skill-category">
                <h5>TecnologÃ­as Clave</h5>
                <div class="skill-tags">
                  <span *ngFor="let skill of basicSkills" class="skill-tag">
                    {{ skill }}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Mini Game Section -->
    <div class="row justify-content-center mt-5">
      <div class="col-12 col-lg-8">
        <div class="card my-card mini-game-card">
          <div class="card-body text-center">
            <h3 class="card-title">
              <i class="bi bi-controller me-2"></i>
              Â¡Juego de Memoria!
            </h3>
            <p class="card-text">
              Haz clic en las cartas para encontrar los pares. 
              Â¡Ve cuÃ¡ntos pares puedes encontrar!
            </p>
            
            <!-- Game Container -->
            <div class="game-container">
              
              <!-- Score -->
              <div class="score-display">
                <span class="score">PuntuaciÃ³n: {{ score }}</span>
                <span class="high-score" *ngIf="highScore > 0">Mejor: {{ highScore }}</span>
              </div>
              
              <!-- Cards Grid -->
              <div class="cards-grid">
                <div *ngFor="let card of cards; let i = index" 
                     class="memory-card"
                     [class.flipped]="card.flipped"
                     [class.matched]="card.matched"
                     (click)="flipCard(i)">
                  <div class="card-inner">
                    <div class="card-front">?</div>
                    <div class="card-back">{{ card.value }}</div>
                  </div>
                </div>
              </div>
              
              <!-- Game Over Screen -->
              <div class="game-over" *ngIf="gameWon">
                <h4>Â¡Felicitaciones! ðŸŽ‰</h4>
                <p>Â¡Encontraste todos los pares!</p>
                <p>PuntuaciÃ³n: {{ score }}</p>
                <button class="btn btn-primary" (click)="restartGame()">
                  <i class="bi bi-arrow-clockwise me-2"></i>
                  Jugar de Nuevo
                </button>
              </div>
              
              <!-- Start Screen -->
              <div class="start-screen" *ngIf="!gameStarted">
                <h4>Â¡Haz clic para empezar!</h4>
                <p>Encuentra todos los pares de cartas</p>
                <button class="btn btn-primary" (click)="startGame()">
                  <i class="bi bi-play-fill me-2"></i>
                  Empezar Juego
                </button>
              </div>
            </div>
            
            <!-- Game Instructions -->
            <div class="game-instructions mt-3">
              <small class="text-muted">
                <i class="bi bi-mouse me-1"></i>
                Click = Voltear carta | 
                <i class="bi bi-lightbulb me-1"></i>
                Memoria = Ganar
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
